import{_ as s,o as a,c as n,R as l}from"./chunks/framework.408c4d71.js";const A=JSON.parse('{"title":"1.性能优化与安全","description":"","frontmatter":{},"headers":[],"relativePath":"know/优化/1性能优化和安全.md","filePath":"know/优化/1性能优化和安全.md","lastUpdated":1684754627000}'),p={name:"know/优化/1性能优化和安全.md"},o=l(`<h1 id="_1-性能优化与安全" tabindex="-1">1.性能优化与安全 <a class="header-anchor" href="#_1-性能优化与安全" aria-label="Permalink to &quot;1.性能优化与安全&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#_3-1-常见web攻击">3.1.常见Web攻击</a><ul><li><a href="#_3-1-1-xss">3.1.1 XSS</a></li><li><a href="#_3-1-2-csrf">3.1.2 CSRF</a></li><li><a href="#_3-1-3-sql注入">3.1.3 SQL注入</a></li><li><a href="#_3-1-4-双包危险">3.1.4 双包危险</a></li></ul></li><li><a href="#_3-2-前端性能优化">3.2.前端性能优化</a><ul><li><a href="#_3-2-1-常用方法">3.2.1 常用方法</a></li><li><a href="#_3-2-2-常用指标">3.2.2 常用指标</a></li></ul></li><li><a href="#_3-3-polyfill">3.3.polyfill</a></li><li><a href="#_3-4-页面白屏的解决办法-骨架屏">3.4.页面白屏的解决办法 骨架屏</a></li><li><a href="#_3-5-加密算法">3.5 加密算法</a><ul><li><a href="#_3-5-1-jwt">3.5.1 jwt</a></li></ul></li><li><a href="#_3-6-gzip-开启两种">3.6 gzip 开启两种</a></li><li><a href="#_3-7-数据埋点">3.7 数据埋点</a></li><li><a href="#_3-8-安全性https-script-meta-js">3.8 安全性https script | meta | js</a><ul><li><a href="#_3-8-1-content-security-policy">3.8.1 content-security-policy</a></li><li><a href="#_3-8-2-strict-transport-security">3.8.2 strict-transport-security</a></li><li><a href="#_3-8-3-x-frame-options">3.8.3 x-frame-options</a></li><li><a href="#_3-8-4-nonce">3.8.4 nonce</a></li><li><a href="#_3-8-5-integrity">3.8.5 integrity</a></li><li><a href="#_3-8-6-crossorigin">3.8.6 crossorigin</a></li></ul></li><li><a href="#_3-9-学习大厂实操">3.9 学习大厂实操</a><ul><li><a href="#_3-9-1-字节">3.9.1 字节</a></li><li><a href="#_3-9-2-拼多多">3.9.2 拼多多</a></li><li><a href="#_3-9-3-cvte">3.9.3 CVTE</a></li><li><a href="#_3-9-4-gitee">3.9.4 gitee</a></li><li><a href="#_3-9-5-谷歌">3.9.5 谷歌</a></li><li><a href="#_3-9-6-stackoverflow">3.9.6 stackoverflow</a></li><li><a href="#_3-9-6-twitter">3.9.6 twitter</a></li></ul></li><li><a href="#_3-10-性能优化示例">3.10 性能优化示例</a><ul><li><a href="#_3-10-1-html-meta头示例">3.10.1 html meta头示例</a></li><li><a href="#_3-10-2-合并前端请求-请求压缩">3.10.2 合并前端请求 | 请求压缩</a></li></ul></li><li><a href="#_3-11-长列表性能优化">3.11 长列表性能优化</a><ul><li><a href="#_3-11-1-虚拟列表">3.11.1 虚拟列表</a></li><li><a href="#_3-11-2-大列表分块渲染">3.11.2 大列表分块渲染</a></li><li><a href="#_3-11-2-前端手动分页">3.11.2 前端手动分页</a></li></ul></li><li><a href="#_3-12-防盗链">3.12 防盗链</a><ul><li><a href="#_3-12-1-nginx">3.12.1 nginx</a></li></ul></li><li><a href="#_3-13-cookie隔离">3.13 cookie隔离</a></li><li><a href="#_3-14-f12中的-字符画">3.14 f12中的 字符画</a><ul><li><a href="#_3-14-1-console-log个性化打印">3.14.1 console.log个性化打印</a></li><li><a href="#_3-14-2-生成字符画">3.14.2 生成字符画</a></li></ul></li><li><a href="#_3-15-webview-性能优化">3.15 webview 性能优化</a></li><li><a href="#_3-16-webpack常见优化手段">3.16 webpack常见优化手段</a><ul><li><a href="#_3-16-1-代码分析">3.16.1 代码分析</a></li><li><a href="#_3-16-2-编译速度">3.16.2 编译速度</a></li><li><a href="#_3-16-3-加载速度">3.16.3 加载速度</a></li><li><a href="#_3-16-4-渲染速度">3.16.4 渲染速度</a></li><li><a href="#_3-16-5-简单口诀">3.16.5 简单口诀</a></li></ul></li><li><a href="#_3-17-优化数据结构">3.17 优化数据结构</a><ul><li><a href="#_3-17-1-背景">3.17.1 背景</a></li><li><a href="#_3-17-2-映射">3.17.2 映射</a></li></ul></li></ul></nav><h2 id="_3-1-常见web攻击" tabindex="-1">3.1.常见Web攻击 <a class="header-anchor" href="#_3-1-常见web攻击" aria-label="Permalink to &quot;3.1.常见Web攻击&quot;">​</a></h2><h3 id="_3-1-1-xss" tabindex="-1">3.1.1 XSS <a class="header-anchor" href="#_3-1-1-xss" aria-label="Permalink to &quot;3.1.1 XSS&quot;">​</a></h3><p>跨站脚本攻击(solution:函数过滤+dom的过滤)</p><p>将恶意script代码植入页面中，需要对输入过滤来防御，或者服务器设置set-cookie来修改客户端cookie的httpOnly或secure属性，如果设置httpOnly那么js脚本就不能访问cookie(不能通过脚本直接获取cookie)，如果设置secure，那么只能https发送cookie(Cookie 是否仅仅通过安全的 HTTPS 连接传给客户端)</p><h3 id="_3-1-2-csrf" tabindex="-1">3.1.2 CSRF <a class="header-anchor" href="#_3-1-2-csrf" aria-label="Permalink to &quot;3.1.2 CSRF&quot;">​</a></h3><p>跨站请求伪造(solution:双token cookies和请求头header里面都有token)</p><p>诱导用户进入第三方网站从而获取原网站保存的凭证，需要同源策略来防御，例如验证码、token、检查http头部的Referer属性值（Referer属性值为实际发送请求的网址）</p><h3 id="_3-1-3-sql注入" tabindex="-1">3.1.3 SQL注入 <a class="header-anchor" href="#_3-1-3-sql注入" aria-label="Permalink to &quot;3.1.3 SQL注入&quot;">​</a></h3><p>将恶意的sql语句插入输入参数中，在后台解析执行，需要严格检查输入类型和格式 点击劫持：通过透明的iframe或图片覆盖，让用户误点击，可以设置响应头</p><h3 id="_3-1-4-双包危险" tabindex="-1">3.1.4 双包危险 <a class="header-anchor" href="#_3-1-4-双包危险" aria-label="Permalink to &quot;3.1.4 双包危险&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">双包危险（cjs和esm混用）</span></span>
<span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">instance of这个函数识别不到</span></span>
<span class="line"><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">添加属性可能识别不到</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">语法混用同一个环境会</span></span></code></pre></div><h2 id="_3-2-前端性能优化" tabindex="-1">3.2.前端性能优化 <a class="header-anchor" href="#_3-2-前端性能优化" aria-label="Permalink to &quot;3.2.前端性能优化&quot;">​</a></h2><h3 id="_3-2-1-常用方法" tabindex="-1">3.2.1 常用方法 <a class="header-anchor" href="#_3-2-1-常用方法" aria-label="Permalink to &quot;3.2.1 常用方法&quot;">​</a></h3><ul><li><p>低请求量：合并资源（例如webpack抽离公共模块），gzip压缩，懒加载（路由懒加载、UI框架按需引入、图片表格懒加载）</p></li><li><p>加快请求速度：DNS预解析(字节是这样做的：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//sso.douyin.com&quot;&gt;</span></span></code></pre></div><p>)、CDN分发、资源并行加载</p></li><li><p>合理使用缓存：webStorage(localStorage, sessionStorage), HTTP缓存，Service Worker（利用Web Worker离线缓存资源）</p></li><li><p>渲染：JS/CSS优化</p></li></ul><h3 id="_3-2-2-常用指标" tabindex="-1">3.2.2 常用指标 <a class="header-anchor" href="#_3-2-2-常用指标" aria-label="Permalink to &quot;3.2.2 常用指标&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">首屏渲染时间</span><span style="color:#A6ACCD;">(fcp:利用permance这个api来实现fcp。response_start</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">navigation_start </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">后面全部加载完</span><span style="color:#A6ACCD;">(ra:reponsend</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">responstart)</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fid:首次输入延迟。 </span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">lighthouse或者人工判断</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">5.</span></span>
<span class="line"><span style="color:#A6ACCD;">ttl（界面交互时间）</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> time to interactive </span></span>
<span class="line"><span style="color:#A6ACCD;">lcp（largest Contentful Paint（最大内容渲染时间） ）</span></span></code></pre></div><h2 id="_3-3-polyfill" tabindex="-1">3.3.polyfill <a class="header-anchor" href="#_3-3-polyfill" aria-label="Permalink to &quot;3.3.polyfill&quot;">​</a></h2><p>本质是一块代码，为兼容性有问题的浏览器提供它不支持的功能。使用时只需要script标签引入即可。</p><h2 id="_3-4-页面白屏的解决办法-骨架屏" tabindex="-1">3.4.页面白屏的解决办法 骨架屏 <a class="header-anchor" href="#_3-4-页面白屏的解决办法-骨架屏" aria-label="Permalink to &quot;3.4.页面白屏的解决办法 骨架屏&quot;">​</a></h2><p>资源预加载 代码分割并行加载（webpack） 路由按需加载，UI框架按需引入</p><h2 id="_3-5-加密算法" tabindex="-1">3.5 加密算法 <a class="header-anchor" href="#_3-5-加密算法" aria-label="Permalink to &quot;3.5 加密算法&quot;">​</a></h2><h3 id="_3-5-1-jwt" tabindex="-1">3.5.1 jwt <a class="header-anchor" href="#_3-5-1-jwt" aria-label="Permalink to &quot;3.5.1 jwt&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jwt是啥</span></span>
<span class="line"><span style="color:#A6ACCD;">1.JWT生成的Token字符串需要客户端手动存储在localStorage或sessionStorage中。再次请求时，客户端需要将Token放在请求头的Authorization字段中。  2.</span></span>
<span class="line"><span style="color:#A6ACCD;">jwt是Json Web Token的缩写，它的结构分为三个部分：header（签名的算法）.payload（过期时间）.signature（用户自己定义的字段），两两之间用【.】分隔。</span></span></code></pre></div><h2 id="_3-6-gzip-开启两种" tabindex="-1">3.6 gzip 开启两种 <a class="header-anchor" href="#_3-6-gzip-开启两种" aria-label="Permalink to &quot;3.6 gzip 开启两种&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">注意一下 webpack的compression</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">webpack</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">plugin要安装上。打包的时候生成gz为结尾的文。件仅仅是生成gzip文件，浏览器访问并不会自动识别，也不能直接引入gzip文件，需要服务器端开启gzip访问权限。由于动态压缩会占用浏览器资源，所以我们可以提前gz压缩</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//第一种是当用户请求文件时压缩文件，显然压缩文件需要耗费 CPU 和内存，而且是每次访问时都要重新压缩一次。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//另一种是当用户请求文件时，直接访问文件旁边的同名 .gz 文件，显然这不需要耗费多少 CPU 和内存。如果没有同名文件，再去做压缩。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">nginx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//开启gzip访问</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip  on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip_types text</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">plain application</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">javascript   application</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">javascript text</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">css application</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">xml text</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">javascript application</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">httpd</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">php image</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">jpeg image</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gif image</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">png</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">#由于nginx的压缩发生在浏览器端而微软的ie6很坑爹</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">会导致压缩后图片看不见所以该选</span></span>
<span class="line"><span style="color:#A6ACCD;">项是禁止ie6发生压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip_disable </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MSIE [1-6]</span><span style="color:#A6ACCD;">\\.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">#如果文件大于1k就启动压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip_min_length 1k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">#以16k为单位</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">按照原始数据的大小以4倍的方式申请内存空间</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">一般此项不要修改</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip_buffers </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> 16k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">#压缩的等级</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">数字选择范围是1</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">9</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">数字越小压缩的速度越快</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">消耗cpu就越大</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip_comp_level </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">#引导的在</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d目录下所有后缀为</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf的子配置文件</span></span>
<span class="line"><span style="color:#A6ACCD;">include </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d</span><span style="color:#676E95;font-style:italic;">/*.conf;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">查看一个网站是否使用gzip压缩，可以通过控制台查看打开响应头中的Content-Encoding选项，如果出现gzip，则开启成功</span></span></code></pre></div><h2 id="_3-7-数据埋点" tabindex="-1">3.7 数据埋点 <a class="header-anchor" href="#_3-7-数据埋点" aria-label="Permalink to &quot;3.7 数据埋点&quot;">​</a></h2><p>数据埋点上报统一的入口:可以监听defineproerty的get方法</p><h2 id="_3-8-安全性https-script-meta-js" tabindex="-1">3.8 安全性https script | meta | js <a class="header-anchor" href="#_3-8-安全性https-script-meta-js" aria-label="Permalink to &quot;3.8 安全性https script | meta | js&quot;">​</a></h2><h3 id="_3-8-1-content-security-policy" tabindex="-1">3.8.1 content-security-policy <a class="header-anchor" href="#_3-8-1-content-security-policy" aria-label="Permalink to &quot;3.8.1 content-security-policy&quot;">​</a></h3><h4 id="_3-8-1-1-大厂示例" tabindex="-1">3.8.1.1 大厂示例 <a class="header-anchor" href="#_3-8-1-1-大厂示例" aria-label="Permalink to &quot;3.8.1.1 大厂示例&quot;">​</a></h4><p>字节官网策略:只是上报数据，并没有在reponse中直接中限制策略</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">content-security-policy-report-only: frame-ancestors https://tcs.bytedance.net https://*.douyin.com;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">default-src &#39;self&#39; data: blob: &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; *.amemv.com ;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">img-src &#39;self&#39; blob: data: android-webview-video-poster: &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; *;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">connect-src &#39;self&#39; wss: *;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">font-src &#39;self&#39; *.bytedance.com *.bytescm.com;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">media-src &#39;self&#39; blob: data: &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; *.ixigua.com *.snssdk.com *.pstatp.com  *.douyin.com ;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">report-uri https://i.snssdk.com/log/sentry/v2/api/slardar/main/?ev_type=csp&amp;bid=douyin_web;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">report-to main-endpoint;child-src &#39;self&#39; data: blob: *.bytedance.com live.douyin.com *</span></span></code></pre></div><h4 id="_3-8-1-2-基本示例" tabindex="-1">3.8.1.2 基本示例 <a class="header-anchor" href="#_3-8-1-2-基本示例" aria-label="Permalink to &quot;3.8.1.2 基本示例&quot;">​</a></h4><p>只允许从指定的源来加载，减少和报告 XSS 攻击</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">security</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">policy：内容安全策略</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">content-security-policy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> default-src &#39;self&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">content-security-policy-report-only</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">策略</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">--2.如果 HTTP 头与 Meta 定义同时存在，则优先采用 HTTP 中的定义。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">--3.报告示例</span></span>
<span class="line"><span style="color:#A6ACCD;">Content-Security-Policy: default-src &#39;self&#39;; report-uri http://reportcollector.example.com/collector.cgi</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">--3.禁止示例</span></span>
<span class="line"><span style="color:#A6ACCD;"> &lt;!-- 不能分成两行写，不然报错。这些东西都是字面意思--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Security-Policy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default-src &#39;self&#39;;script-src  &#39;unsafe-inline&#39; ;style-src https://unpkg.com &#39;unsafe-inline&#39; ; font-src https://unpkg.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;!--所有http变成https链接  --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Security-Policy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">upgrade-insecure-requests</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span></code></pre></div><h3 id="_3-8-2-strict-transport-security" tabindex="-1">3.8.2 strict-transport-security <a class="header-anchor" href="#_3-8-2-strict-transport-security" aria-label="Permalink to &quot;3.8.2 strict-transport-security&quot;">​</a></h3><p>（reponse）</p><h4 id="_3-8-2-1-大厂示例" tabindex="-1">3.8.2.1 大厂示例 <a class="header-anchor" href="#_3-8-2-1-大厂示例" aria-label="Permalink to &quot;3.8.2.1 大厂示例&quot;">​</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">字节官网策略：strict-transport-security: max-age=31536000;</span></span></code></pre></div><h4 id="_3-8-2-2-基本示例" tabindex="-1">3.8.2.2 基本示例 <a class="header-anchor" href="#_3-8-2-2-基本示例" aria-label="Permalink to &quot;3.8.2.2 基本示例&quot;">​</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">全称是https strict</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">transport</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">security：严格安全传输</span></span>
<span class="line"><span style="color:#A6ACCD;">如果在有效期内用http访问这个地址，那么会返回307重定向</span></span>
<span class="line"><span style="color:#A6ACCD;">示例：strict</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">transport</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">security</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">max</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">age</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">86400</span><span style="color:#A6ACCD;">   (秒)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">有个问题是你在https设置这个请求是有效的，但是你要是在http设置这个请求头完全无效</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">strict-transport-security</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">max-age=86400</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="_3-8-3-x-frame-options" tabindex="-1">3.8.3 x-frame-options <a class="header-anchor" href="#_3-8-3-x-frame-options" aria-label="Permalink to &quot;3.8.3 x-frame-options&quot;">​</a></h3><p>字节官网策略：x-frame-options: DENY</p><p>可以不允许别人用iframe加载你的界面</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">一般就三个值：</span></span>
<span class="line"><span style="color:#A6ACCD;">X-Frame-Options：DENY（不允许使用）  </span></span>
<span class="line"><span style="color:#A6ACCD;">SAMEORIGIN （同源使用） </span></span>
<span class="line"><span style="color:#A6ACCD;">frame-ancestors b.com  （允许xx嵌套）</span></span>
<span class="line"><span style="color:#A6ACCD;">frame-src （允许加载xx）</span></span></code></pre></div><h3 id="_3-8-4-nonce" tabindex="-1">3.8.4 nonce <a class="header-anchor" href="#_3-8-4-nonce" aria-label="Permalink to &quot;3.8.4 nonce&quot;">​</a></h3><p>script上的js完整性和安全性校验</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">reponse返回的时候的header值：Content</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">Security</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">Policy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> script</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nonce-Ef</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2.</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">script nonce</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nonce-Ef</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./hello.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#A6ACCD;">script</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="_3-8-5-integrity" tabindex="-1">3.8.5 integrity <a class="header-anchor" href="#_3-8-5-integrity" aria-label="Permalink to &quot;3.8.5 integrity&quot;">​</a></h3><p>常用于cdn上面</p><h4 id="_3-8-5-1-大厂示例" tabindex="-1">3.8.5.1 大厂示例 <a class="header-anchor" href="#_3-8-5-1-大厂示例" aria-label="Permalink to &quot;3.8.5.1 大厂示例&quot;">​</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">字节把这里进行了打包，因此我们看不到。</span></span>
<span class="line"><span style="color:#A6ACCD;">common-monitors里面有integrity这个属性</span></span></code></pre></div><h4 id="_3-8-5-2-例子" tabindex="-1">3.8.5.2 例子 <a class="header-anchor" href="#_3-8-5-2-例子" aria-label="Permalink to &quot;3.8.5.2 例子&quot;">​</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">可以通过 </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//www.srihash.org/ 生成hash值 </span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">然后</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">script type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> integrity</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sha256</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#A6ACCD;">script</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> 填进去hash值</span></span></code></pre></div><h3 id="_3-8-6-crossorigin" tabindex="-1">3.8.6 crossorigin <a class="header-anchor" href="#_3-8-6-crossorigin" aria-label="Permalink to &quot;3.8.6 crossorigin&quot;">​</a></h3><p>是否跨域</p><h2 id="_3-9-学习大厂实操" tabindex="-1">3.9 学习大厂实操 <a class="header-anchor" href="#_3-9-学习大厂实操" aria-label="Permalink to &quot;3.9 学习大厂实操&quot;">​</a></h2><p>下面这些大厂meta的name和description都是有的</p><h3 id="_3-9-1-字节" tabindex="-1">3.9.1 字节 <a class="header-anchor" href="#_3-9-1-字节" aria-label="Permalink to &quot;3.9.1 字节&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CSP安全头</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">security</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">policy</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">report</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">only</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">report</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uri </span></span>
<span class="line"><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HSTS安全头：</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">meta http</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">strict-transport-security</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">max-age=86400  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">frame</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">options：不允许别人用iframe加载你的界面</span></span>
<span class="line"><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">link的rel属性用dns</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">prefetch预加载</span></span>
<span class="line"><span style="color:#A6ACCD;">5</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">用了CSP安全头但是没用他最常见的content</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">security</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">policy而是用x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">xss</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">protection进行了替换。x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">xss</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">protection</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> mode</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">block对于CSP的好处是可以对那些暂时不支持CSP的浏览器进行保护。当检测到xss脚本的时候，页面会停止加载</span></span>
<span class="line"><span style="color:#A6ACCD;">6</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">script用了 crossorigin，nonce，integrity 做安全</span></span>
<span class="line"><span style="color:#A6ACCD;">7</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">甚至js中还有roles，aria</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">checked属性</span></span>
<span class="line"><span style="color:#A6ACCD;">8</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tdk</span></span>
<span class="line"><span style="color:#A6ACCD;">总结</span></span>
<span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x开头的reponse头：x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">xss</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">protection，x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">frame</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">options </span></span>
<span class="line"><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">安全的reponse头：STS ，CSP </span></span>
<span class="line"><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">安全的js:dns</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">prefetch， crossorigin，nonce（跟csp一起用），integrity（hash） </span></span>
<span class="line"><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">人文：roles，aria</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">checked</span></span></code></pre></div><h3 id="_3-9-2-拼多多" tabindex="-1">3.9.2 拼多多 <a class="header-anchor" href="#_3-9-2-拼多多" aria-label="Permalink to &quot;3.9.2 拼多多&quot;">​</a></h3><p>总结：稍逊一筹</p><div class="language-JS"><button title="Copy Code" class="copy"></button><span class="lang">JS</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">没有用CSP，HSTS</span></span>
<span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">link的rel属性用preload</span></span>
<span class="line"><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">script用了crossorigin</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">async</span></span>
<span class="line"><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">meta的cache</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">control 和 pragma 和 expires</span></span>
<span class="line"><span style="color:#A6ACCD;">5</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tdk</span></span></code></pre></div><h3 id="_3-9-3-cvte" tabindex="-1">3.9.3 CVTE <a class="header-anchor" href="#_3-9-3-cvte" aria-label="Permalink to &quot;3.9.3 CVTE&quot;">​</a></h3><p>总结：.........</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tdk</span></span>
<span class="line"><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">frame</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">options </span></span>
<span class="line"><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">甚至https的官网显示是不安全的</span></span></code></pre></div><h3 id="_3-9-4-gitee" tabindex="-1">3.9.4 gitee <a class="header-anchor" href="#_3-9-4-gitee" aria-label="Permalink to &quot;3.9.4 gitee&quot;">​</a></h3><p>总结：基本没有做安全性js的设置，但是有一些点确实是很有意思的</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">meta</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">1.1</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dns</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">prefetch</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">control </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">viewport</span><span style="color:#A6ACCD;">(最大最小都有设置) </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> X</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">UA</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">Compatible（设置成ie的）</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> google（class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">notranslate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> ， 这一点非常有意思。只要给不想被翻译的地方添加class的类名 notranslate也可以做到）</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> Cache</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">control（no</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cache） Expires（</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">）</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> dns</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">prefetch </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> google</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">script ：async defer</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">defer</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h3 id="_3-9-5-谷歌" tabindex="-1">3.9.5 谷歌 <a class="header-anchor" href="#_3-9-5-谷歌" aria-label="Permalink to &quot;3.9.5 谷歌&quot;">​</a></h3><p>总结：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jsmodel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> jsname</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> jsaction</span></span></code></pre></div><h3 id="_3-9-6-stackoverflow" tabindex="-1">3.9.6 stackoverflow <a class="header-anchor" href="#_3-9-6-stackoverflow" aria-label="Permalink to &quot;3.9.6 stackoverflow&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">og 和 twitter开头的一系列属性</span></span>
<span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//developers.facebook.com/docs/plugins/share-button/#example</span></span>
<span class="line"><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//www.nousbuild.org/codeu/custom-share-link/</span></span>
<span class="line"><span style="color:#FFCB6B;">og</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">title </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">og</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">type </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">og</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">url </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">og</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">image </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">基于Open Graph 的东西，分享出去的时候能够按照特定方式进行解析。目前企业微信上已经实现</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">script 的 async</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">equiv （利于开发人员增加实验性功能） </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> 令牌相等可以开启新功能 ， 有Popover API，WebGL </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">，Picture</span><span style="color:#89DDFF;">-in-</span><span style="color:#A6ACCD;">Picture </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> App Dark Mode 等新功能</span></span>
<span class="line"><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">equiv 的 origin</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">tria：</span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//developer.chrome.com/origintrials/#/trials/active</span></span></code></pre></div><h3 id="_3-9-6-twitter" tabindex="-1">3.9.6 twitter <a class="header-anchor" href="#_3-9-6-twitter" aria-label="Permalink to &quot;3.9.6 twitter&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">link rel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> preconnect </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> dns</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">prefetch </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> preload </span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2.</span><span style="color:#A6ACCD;"> meta name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">google</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">verification</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">3.</span><span style="color:#A6ACCD;"> facebook</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">domain</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">verification 广告的权力 和 链接的权利</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">apple</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">mobile</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">web</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">title</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">5</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">一堆og</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">6</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Onion</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">Location content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxx.og</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h2 id="_3-10-性能优化示例" tabindex="-1">3.10 性能优化示例 <a class="header-anchor" href="#_3-10-性能优化示例" aria-label="Permalink to &quot;3.10 性能优化示例&quot;">​</a></h2><h3 id="_3-10-1-html-meta头示例" tabindex="-1">3.10.1 html meta头示例 <a class="header-anchor" href="#_3-10-1-html-meta头示例" aria-label="Permalink to &quot;3.10.1  html meta头示例&quot;">​</a></h3><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- W</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    从字节学到的</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    1.CSP安全头-content-security-policy-report-only+report-uri </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    2.HSTS安全头：&lt;meta http-equiv=&quot;strict-transport-security&quot; content=&quot;max-age=86400  &quot;&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    3.x-frame-options：不允许别人用iframe加载你的界面</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    4.link的rel属性用dns-prefetch预加载</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    5.用了CSP安全头但是没用他最常见的content-security-policy而是用x-xss-protection进行了替换。x-xss-protection: 1; mode=block对于CSP的好处是可以对那些暂时不支持CSP的浏览器进行保护。当检测到xss脚本的时候，页面会停止加载</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    6.今日头条的官网用了descripton和keywords做seo</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    7.script用了 crossorigin，nonce，integrity 做安全</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 设置文档的编码为 utf-8 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ISO-8859-1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">X-UA-Compatible</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IE=edge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 1.seo优化：搜索引擎有一些会搜索 content，使用逗号分隔，关键词，name不能变 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HTML5,css,js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">这是meta的测试</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 允许抓取本页和跟踪链接，noindex和nofollow是不允许抓取链接和跟踪链接 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">robots</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index,follow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        viewport是移动端页面渲染的容器，手机浏览器把页面放在这个虚拟的窗口里面，通常这个viewport比实际宽度宽</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        width可以给一个指定数值，但是会变得不好 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=10.0&quot;&gt; --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 2.CSP安全策略示例 ，不能分成两行写，不然报错。这些东西都是字面意思。--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Security-Policy</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default-src &#39;self&#39;;script-src  &#39;unsafe-inline&#39; ;style-src https://unpkg.com &#39;unsafe-inline&#39; ; font-src https://unpkg.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 像下面这样子设置了之后，只有在 script 标签内带有相同 nonce 值的脚本才能执行。 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- &lt;script nonce=&quot;nonce-Ef&quot; src=&quot;./hello.js&quot;&gt;&lt;/script&gt; --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src &#39;nonce-Ef&#39;&quot;&gt; --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!--所有http变成https链接  --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Security-Policy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">upgrade-insecure-requests</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 3.STS安全示例 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">strict-transport-security</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">max-age=86400  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">”Window-target”</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">Content</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">”_top”</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Meta头示例</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 常用头设置 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Pragma</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no-cache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">http-equiv</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">expires</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">Content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">86400</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- 这是2秒后跳转，如果要2秒刷新一次我们把后面的url去掉就好了 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- &lt;meta http-equiv=&quot;refresh&quot; content=&quot;2 url=&#39;http://hi.baidu.com/tesalo/&#39;&quot;  /&gt; --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">&lt;!-- </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        这里可以用来进行es6的测试</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        Content-Security-Policy: script-src &#39;nonce-Ef&#39;;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        &lt;script type=&quot;module&quot; src=&quot;app.js&quot; integrity=&quot;sha256&quot;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        &lt;script nomodule src=&quot;classic-bundle.js&quot;&gt;&lt;/script&gt; </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">link</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylesheet</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://unpkg.com/element-ui/lib/theme-chalk/index.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">body</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#B2CCD6;">word-wrap</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> break-word</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">role</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">checkbox</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">aria-checked</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">checked</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">111</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">tabindex</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">www.baidu.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">tabindex</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">注册账号</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">tabindex</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 易错：1.get 请求不能有body</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 2.第一次返回的结果是一个promise或者是respnse对象</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> datat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fetch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:5501/docs/know/img/data.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//   &#39;Content-Type&#39;: &#39;application/json&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cors</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">credentials</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">include</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ceshi</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">ceshi</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="_3-10-2-合并前端请求-请求压缩" tabindex="-1">3.10.2 合并前端请求 | 请求压缩 <a class="header-anchor" href="#_3-10-2-合并前端请求-请求压缩" aria-label="Permalink to &quot;3.10.2 合并前端请求 | 请求压缩&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">1.</span><span style="color:#C792EA;">n</span><span style="color:#A6ACCD;">ginx里面合并前端请求 nginx</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">-</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(tengine)</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">缓存 </span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">请求数 </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> 应用优化 </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> 动静结合</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">userFetch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> product </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">productFetch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">变成</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">user </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> products</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allSettled</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">userFetch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">productFetch</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rejected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">handle</span><span style="color:#A6ACCD;">(user)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">资源供给</span><span style="color:#A6ACCD;">(cdn)  请求分流 压缩传输：nginx加上lvs f5的系统</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js压缩请求</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/js/extend.js,jquery-1.12.4.js,jquery.min.js,validform_v5.3.2.js,wechatLink-1.1.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2.</span><span style="color:#A6ACCD;"> promise请求合并</span></span>
<span class="line"><span style="color:#A6ACCD;">merge</span><span style="color:#89DDFF;">=</span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#82AAFF;">zGet</span><span style="color:#A6ACCD;"> (url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> param</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> merge</span><span style="color:#89DDFF;">=</span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 检查是否命中缓存中的promise如果有返回命中，不再发出请求</span></span>
<span class="line"><span style="color:#82AAFF;">checkPromise</span><span style="color:#A6ACCD;">(url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">param)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//然后看一下有没有相同的promise（key来控制）</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;">(merge </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> cachePromise)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cachePromise</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">3.</span><span style="color:#C792EA;">n</span><span style="color:#A6ACCD;">ginx</span></span>
<span class="line"><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">-</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(tengine)</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">（使用的时候多传一个参数merge 表示是否使用并发合并的功能）</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">结果合并</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> requestNum </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//声明请求数,用于记录请求完成计数，每完成一个请求则减1，直到为0；</span></span>
<span class="line"><span style="color:#A6ACCD;">成功的时候</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//如果请求记录为0，则触发所有请求完成的监听回调</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//此请求完成后，记录数减1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//结果进行可靠地合并</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">5</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">分片并发上传</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> arr</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">axios</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span></span>
<span class="line"><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">(arr[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">6</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">直接promise</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">allsettle</span></span></code></pre></div><h2 id="_3-11-长列表性能优化" tabindex="-1">3.11 长列表性能优化 <a class="header-anchor" href="#_3-11-长列表性能优化" aria-label="Permalink to &quot;3.11 长列表性能优化&quot;">​</a></h2><p>我们要知道界面渲染的瓶颈主要在 dom的渲染</p><p>我们有三种方法。</p><h3 id="_3-11-1-虚拟列表" tabindex="-1">3.11.1 虚拟列表 <a class="header-anchor" href="#_3-11-1-虚拟列表" aria-label="Permalink to &quot;3.11.1 虚拟列表&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">注意一下，虚拟列表有一个点。就是有苹果系统会有虚拟滚动条不生效的bug。</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">知识点：主要就是判断当前可观测视口的数据长度来进行渲染</span></span></code></pre></div><h3 id="_3-11-2-大列表分块渲染" tabindex="-1">3.11.2 大列表分块渲染 <a class="header-anchor" href="#_3-11-2-大列表分块渲染" aria-label="Permalink to &quot;3.11.2 大列表分块渲染&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">知识点：一进入界面的时候我们可以一直渲染数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//可以扔到table界面</span></span>
<span class="line"><span style="color:#82AAFF;">blockLoading</span><span style="color:#A6ACCD;">(originData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> that) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">total</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">originData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 一次插入 50 条</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">once</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//每条记录的索引</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//循环加载数据</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">loop</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">curTotal</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">curIndex</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">curTotal</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//每页多少条 少于once 我们就取值</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pageCount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">min</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">curTotal</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">once</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requestAnimationFrame</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">curIndex</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">curIndex</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pageCount</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">// 这里运行我们的逻辑</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">$set</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">lastData</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">loop</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">curTotal</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pageCount</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">curIndex</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pageCount</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">loop</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">total</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">originData</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="_3-11-2-前端手动分页" tabindex="-1">3.11.2 前端手动分页 <a class="header-anchor" href="#_3-11-2-前端手动分页" aria-label="Permalink to &quot;3.11.2 前端手动分页&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">知识点：直接分页</span></span></code></pre></div><h2 id="_3-12-防盗链" tabindex="-1">3.12 防盗链 <a class="header-anchor" href="#_3-12-防盗链" aria-label="Permalink to &quot;3.12  防盗链&quot;">​</a></h2><h3 id="_3-12-1-nginx" tabindex="-1">3.12.1 nginx <a class="header-anchor" href="#_3-12-1-nginx" aria-label="Permalink to &quot;3.12.1 nginx&quot;">​</a></h3><div class="language-xml-dtd"><button title="Copy Code" class="copy"></button><span class="lang">xml-dtd</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">原理是利用request的请求头refer做判断然后指定的才进行放行</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">location ~*\\.(png|jpg|gif){</span></span>
<span class="line"><span style="color:#A6ACCD;">		#放行白名单</span></span>
<span class="line"><span style="color:#A6ACCD;">           valid_referers  192.168.200.222 *.example.com example.*;</span></span>
<span class="line"><span style="color:#A6ACCD;">           if ($invalid_referer){</span></span>
<span class="line"><span style="color:#A6ACCD;">                return 403;</span></span>
<span class="line"><span style="color:#A6ACCD;">           }</span></span>
<span class="line"><span style="color:#A6ACCD;">           rewrite ^/ https://blog.csdn.net/;</span></span>
<span class="line"><span style="color:#A6ACCD;">           break;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="_3-13-cookie隔离" tabindex="-1">3.13 cookie隔离 <a class="header-anchor" href="#_3-13-cookie隔离" aria-label="Permalink to &quot;3.13 cookie隔离&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cookie隔离指的是用别的域名来进行静态资源的存储</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">利用浏览器跨域的操作的时候不会带有cookie数据，这样就可以减少请求头的大小。</span></span></code></pre></div><h2 id="_3-14-f12中的-字符画" tabindex="-1">3.14 f12中的 字符画 <a class="header-anchor" href="#_3-14-f12中的-字符画" aria-label="Permalink to &quot;3.14  f12中的 字符画&quot;">​</a></h2><h3 id="_3-14-1-console-log个性化打印" tabindex="-1">3.14.1 console.log个性化打印 <a class="header-anchor" href="#_3-14-1-console-log个性化打印" aria-label="Permalink to &quot;3.14.1 console.log个性化打印&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">飞鸟%c慕鱼%c博客</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">color:red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">color:blue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">公司诚聘前端工程师</span><span style="color:#A6ACCD;">\\n</span><span style="color:#C3E88D;">%c 简历投递地址 %c http://www.badu.toudi.com </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">color:blue;font-weight:bold;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">color:red</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a/b/c/d</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// /g全局替换 不然只会替换第一个</span></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a/b/c/d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\/</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">g</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;">\\b\\c\\d</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(String</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">}\`</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><h3 id="_3-14-2-生成字符画" tabindex="-1">3.14.2 生成字符画 <a class="header-anchor" href="#_3-14-2-生成字符画" aria-label="Permalink to &quot;3.14.2  生成字符画&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">使用网站patorjk</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">来生成自己的字符画，然后进行转义 把所有 \\ 变成\\\\ 。然后在通过代码包装输出到控制台。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">raw </span><span style="color:#82AAFF;">返回转义前的字符串</span><span style="color:#A6ACCD;"> (cider面试的标准答案)</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> String</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">___________.__                     __                   .__                  </span></span>
<span class="line"><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;">   _____/|  |    ____    ____  _/  |_ _______   ____  |  |   __ __ ___  ___</span></span>
<span class="line"><span style="color:#C3E88D;"> |    __)_ |  |  _/ __ </span><span style="color:#A6ACCD;">\\ </span><span style="color:#C3E88D;">_/ ___</span><span style="color:#A6ACCD;">\\ \\ </span><span style="color:#C3E88D;">  __</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">_  __ </span><span style="color:#A6ACCD;">\\ </span><span style="color:#C3E88D;">/  _ </span><span style="color:#A6ACCD;">\\ </span><span style="color:#C3E88D;">|  |  |  |  </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">  </span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">  /</span></span>
<span class="line"><span style="color:#C3E88D;"> |        </span><span style="color:#A6ACCD;">\\|</span><span style="color:#C3E88D;">  |__</span><span style="color:#A6ACCD;">\\ </span><span style="color:#C3E88D;"> ___/ </span><span style="color:#A6ACCD;">\\ </span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;">__  |  |   |  | </span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">(  &lt;_&gt; )|  |__|  |  / &gt;    &lt; </span></span>
<span class="line"><span style="color:#C3E88D;">/_______  /|____/ </span><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;">__  &gt; </span><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;">__  &gt; |__|   |__|    </span><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;">___/ |____/|____/ /__/</span><span style="color:#A6ACCD;">\\_</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">        </span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">            </span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">      </span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">                                           </span><span style="color:#A6ACCD;">\\/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">={</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\15</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\\15</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> String</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raw</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\\15</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">%c</span></span>
<span class="line"><span style="color:#C3E88D;">__________.__                __                .__                </span></span>
<span class="line"><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">_   _____/|  |   ____  _____/  |________  ____ |  |  __ _____  ___</span></span>
<span class="line"><span style="color:#C3E88D;"> |    __)_ |  | _/ __ </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/ ___</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">   __</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">_  __ </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/  _ </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">|  | |  |  </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">  </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/  /</span></span>
<span class="line"><span style="color:#C3E88D;"> |        </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">|  |_</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">  ___|  </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">___|  |  |  | </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">(  &lt;_&gt; )  |_|  |  /&gt;    &lt; </span></span>
<span class="line"><span style="color:#C3E88D;">/_______  /|____/</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">___  &gt;___  &gt;__|  |__|   </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">____/|____/____//__/</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">_ </span><span style="color:#A6ACCD;">\\\\</span></span>
<span class="line"><span style="color:#C3E88D;">        </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/           </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/    </span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/      </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">color:red</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">st</span></span></code></pre></div><h2 id="_3-15-webview-性能优化" tabindex="-1">3.15 webview 性能优化 <a class="header-anchor" href="#_3-15-webview-性能优化" aria-label="Permalink to &quot;3.15  webview 性能优化&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">h5做性能优化，例如代码质量，js打包，css打包，cdn加速</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app初始打开的时候，是不会不会初始化浏览器内核。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">初始化一个全局的webview（省去了70</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">700ms），访问webview直接使用webview。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">用native 开始网络请求数据，然后页面开始时候，可以向native获取代理请求（数据请求和webview的native并行）</span></span></code></pre></div><h2 id="_3-16-webpack常见优化手段" tabindex="-1">3.16 webpack常见优化手段 <a class="header-anchor" href="#_3-16-webpack常见优化手段" aria-label="Permalink to &quot;3.16 webpack常见优化手段&quot;">​</a></h2><p>前端性能优化分为两类：一类是文件加载更快、另一类是文件渲染更快</p><h3 id="_3-16-1-代码分析" tabindex="-1">3.16.1 代码分析 <a class="header-anchor" href="#_3-16-1-代码分析" aria-label="Permalink to &quot;3.16.1 代码分析&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//1.BundleAnalyzer 分析打包大小</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.speedmeasure：分析加载速度</span></span></code></pre></div><h3 id="_3-16-2-编译速度" tabindex="-1">3.16.2 编译速度 <a class="header-anchor" href="#_3-16-2-编译速度" aria-label="Permalink to &quot;3.16.2 编译速度&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//1.threadloader-第一次编译的时候慢一点。后面贼快</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.Terser 也可以在编译的时候</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//3.swc loader增加ast 解析速度</span></span></code></pre></div><h3 id="_3-16-3-加载速度" tabindex="-1">3.16.3 加载速度 <a class="header-anchor" href="#_3-16-3-加载速度" aria-label="Permalink to &quot;3.16.3 加载速度&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">体积压缩</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//1.js压缩：terser压缩-原理-1.删除注释，空格，换行符 2.变量名压缩 3.提前计算4.console.log 去除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.image压缩：imagemin-原理-1.例如png会把24位的图片信息压缩成8位的信息 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//3.css压缩：cssnano+postcss-原理-1.删除注释，空格 2.变量名压缩</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//4.js压缩：还有一个压缩是利用webpack的压缩optimization（优化器）进行代码分包。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//常用的是chunkIds（算法：可以选择named-短期缓存和detaerministic-长期缓存）和splitChunks（主要是里面的cacheGroups verndor的test-正则匹配名字和minChunk-最小引用数 一般来说呢.多引用的会专门分包）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//1.使用长连接</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.雪碧图/精灵图</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//3.节流防抖</span></span></code></pre></div><h3 id="_3-16-4-渲染速度" tabindex="-1">3.16.4 渲染速度 <a class="header-anchor" href="#_3-16-4-渲染速度" aria-label="Permalink to &quot;3.16.4 渲染速度&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">缓存（HTTP缓存、本地缓存、Vue的keep</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">alive缓存等）</span></span>
<span class="line"><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">提前渲染：ssr服务器端渲染</span></span>
<span class="line"><span style="color:#F78C6C;">3.</span><span style="color:#A6ACCD;"> 避免渲染阻塞：CSS放在HTML的head中 JS放在HTML的body底部 </span></span>
<span class="line"><span style="color:#A6ACCD;">4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">懒加载</span></span>
<span class="line"><span style="color:#A6ACCD;">5</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">对dom查询进行缓存、将dom操作合并、使用减少重排的标签</span></span></code></pre></div><h3 id="_3-16-5-简单口诀" tabindex="-1">3.16.5 简单口诀 <a class="header-anchor" href="#_3-16-5-简单口诀" aria-label="Permalink to &quot;3.16.5  简单口诀&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">包 后套套，包 前 cp，中间gls。最后acg</span></span>
<span class="line"><span style="color:#A6ACCD;">包后压缩ttcnb treeshaking terser  cache nano（css体积）imagemin</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">webpack browlist</span></span>
<span class="line"><span style="color:#A6ACCD;">中间性能：glspf  prefetch     gzip split跟cachegroup一起用 loader </span></span>
<span class="line"><span style="color:#A6ACCD;">包前tscpd cache swc thread pnpm dllplugin</span></span>
<span class="line"><span style="color:#A6ACCD;">分析 speedmeasure bundleanalyse</span></span></code></pre></div><h2 id="_3-17-优化数据结构" tabindex="-1">3.17 优化数据结构 <a class="header-anchor" href="#_3-17-优化数据结构" aria-label="Permalink to &quot;3.17 优化数据结构&quot;">​</a></h2><h3 id="_3-17-1-背景" tabindex="-1">3.17.1 背景 <a class="header-anchor" href="#_3-17-1-背景" aria-label="Permalink to &quot;3.17.1 背景&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">offConfigStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未开始</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">下架申请中</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">通过下架 </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">拒绝下架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 上下线状态</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">appConfigStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未上线</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">已上线</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 审核状态</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">reviewConfigStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建中</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">待审核</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">审核未通过</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">审核已通过</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offConfigStatus</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appConfigStatus</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reviewConfigStatus</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">类似是这样的数据结构，但是不利于维护</span></span></code></pre></div><h3 id="_3-17-2-映射" tabindex="-1">3.17.2 映射 <a class="header-anchor" href="#_3-17-2-映射" aria-label="Permalink to &quot;3.17.2 映射&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EnumTransType</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FormType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">edit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AppCommonInfo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">auditStatus</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 应用审核状态s</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">packageName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 包名</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">latestVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 最新版本号s</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">updateTime</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 最后更新时间</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReviewStatusEnum</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  created </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  willApproved</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  unApproved</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Approved</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">OffStatusEnum</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  notStarted </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  underRemovalApp</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  appRemovedSuccessfully</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  appRemovedRejected</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 上下线状态</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AppStatusEnum</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  notOnline </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  online</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReviewStatusDataType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EnumTransType</span><span style="color:#89DDFF;">&lt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> ReviewStatusEnum</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">OffStatusType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EnumTransType</span><span style="color:#89DDFF;">&lt;keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> OffStatusEnum</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AppStatusType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EnumTransType</span><span style="color:#89DDFF;">&lt;keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> AppStatusEnum</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;;</span></span></code></pre></div><p>const.ts</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">AppStatusType</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">OffStatusType</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">ReviewStatusDataType</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/types/manageCenter.d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ReviewStatusData</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReviewStatusDataType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">created</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建中</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">willApproved</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">待审核</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">unApproved</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">审核未通过</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">Approved</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">审核已通过</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> AppStatus</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AppStatusType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">notOnline</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未上线</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">online</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">已上线</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> OffStatus</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">OffStatusType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">notStarted</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未开始</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">underRemovalApp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">下架申请中</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">appRemovedSuccessfully</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">通过下架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">appRemovedRejected</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">拒绝下架</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// AppStatusEnum </span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">notOnline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">online</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">notOnline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">online</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// AppStatus 状态如下</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">notOnline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">未上线</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">online</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">已上线</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,125),e=[o];function t(c,r,D,y,F,C){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{A as __pageData,u as default};
