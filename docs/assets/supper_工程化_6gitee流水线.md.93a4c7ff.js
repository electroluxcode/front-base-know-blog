import{_ as s,o as a,c as n,R as l}from"./chunks/framework.408c4d71.js";const A=JSON.parse('{"title":"6.gitee go流水线","description":"","frontmatter":{},"headers":[],"relativePath":"supper/工程化/6gitee流水线.md","filePath":"supper/工程化/6gitee流水线.md","lastUpdated":1684758476000}'),p={name:"supper/工程化/6gitee流水线.md"},o=l(`<h1 id="_6-gitee-go流水线" tabindex="-1">6.gitee go流水线 <a class="header-anchor" href="#_6-gitee-go流水线" aria-label="Permalink to &quot;6.gitee go流水线&quot;">​</a></h1><p><strong>重要：这玩意连接电脑或者打印日志不能通过设置ssh连接。必须要设置主机组。日志组的设置在linux上要sudo，在window上面要powershell</strong></p><p><a href="https://gitee.com/features/gitee-go" target="_blank" rel="noreferrer">https://gitee.com/features/gitee-go</a> 中开通，或者具体的项目中开通gitee go</p><p>当我们选择用node.js的方式进行创建的时候会生成master-pipeline.yml</p><h2 id="_6-1-开通gitee-流水线" tabindex="-1">6.1 开通gitee 流水线 <a class="header-anchor" href="#_6-1-开通gitee-流水线" aria-label="Permalink to &quot;6.1 开通gitee 流水线&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">此时会产生一次提交并生成流水线</span></span>
<span class="line"><span style="color:#A6ACCD;">我们可以看到有图形化配置和代码视图的配置。比较重要的的是</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//1.triggers：什么时候触发-触发事件</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.主要的关系：stages-下方可以有多个阶段。阶段的名字叫做name/displayname。阶段下面我们定义任务。任务我们定义在steps这个集合里面，分别的任务叫做并行任务</span></span>
<span class="line"><span style="color:#FFCB6B;">commands</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"># 新建build目录，切换到build目录</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mkdir build &amp;&amp; cd build </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"># 生成Unix平台的makefiles文件并执行构建</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> cmake </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">G </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unix Makefiles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">../</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> make </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">j</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//如果阶段下面有多个任务我们叫做并行任务</span></span></code></pre></div><h2 id="_6-2示例" tabindex="-1">6.2示例 <a class="header-anchor" href="#_6-2示例" aria-label="Permalink to &quot;6.2示例&quot;">​</a></h2><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pipeline-20221104</span></span>
<span class="line"><span style="color:#F07178;">displayName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">输出</span></span>
<span class="line"><span style="color:#F07178;">triggers</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">trigger</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">auto</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">prefix</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">stages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stage-14a2cd9a</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">displayName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">输出</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">strategy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">naturally</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">trigger</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">auto</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">executor</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">step</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shell@agent</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">execute_shell</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">displayName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Shell 脚本执行</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">hostGroupID</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">hostID</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e53bd97b-a0d6-4b28-b037-13e24066e1e1</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">echo &#39;Hello Gitee!&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">notify</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">strategy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">retry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div>`,8),e=[o];function t(c,r,D,y,C,F){return a(),n("div",null,e)}const g=s(p,[["render",t]]);export{A as __pageData,g as default};
