import{_ as s,o as a,c as n,R as l}from"./chunks/framework.408c4d71.js";const F=JSON.parse('{"title":"8.ffmpeg","description":"","frontmatter":{},"headers":[],"relativePath":"know/框架/8ffmpeg.md","filePath":"know/框架/8ffmpeg.md","lastUpdated":1684754627000}'),p={name:"know/框架/8ffmpeg.md"},o=l(`<h1 id="_8-ffmpeg" tabindex="-1">8.ffmpeg <a class="header-anchor" href="#_8-ffmpeg" aria-label="Permalink to &quot;8.ffmpeg&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#_8-1-基础">8.1 基础</a></li><li><a href="#_8-2-实操">8.2 实操</a><ul><li><a href="#_8-2-1-查看">8.2.1 查看</a></li><li><a href="#_8-2-2-转码">8.2.2 转码</a></li><li><a href="#_8-2-3-分辨率">8.2.3 分辨率</a></li><li><a href="#_8-2-3-时间截取">8.2.3 时间截取</a></li><li><a href="#_8-2-4-合成视频-和-音频">8.2.4 合成视频 和 音频</a></li><li><a href="#_8-2-5-合成多个视频-y-不经过提示直接覆盖">8.2.5 合成多个视频 | -y 不经过提示直接覆盖</a></li><li><a href="#_8-2-6-截图">8.2.6 截图</a></li><li><a href="#_8-2-7-水印">8.2.7 水印</a></li><li><a href="#_8-2-8-输出gif">8.2.8 输出gif</a></li><li><a href="#_8-2-9-录屏-直播-基本用不了">8.2.9 录屏 | 直播（基本用不了）</a></li><li><a href="#_8-2-11-常用">8.2.11 常用</a></li></ul></li></ul></nav><h2 id="_8-1-基础" tabindex="-1">8.1 基础 <a class="header-anchor" href="#_8-1-基础" aria-label="Permalink to &quot;8.1 基础&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">1.</span><span style="color:#A6ACCD;"> 容器：视频流，字幕流（srt），音频流 （stream）</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">2.</span><span style="color:#A6ACCD;"> 编码：h264，h265（hevc），MP3</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">一个MP4可以 有多个音轨 和 视频 流</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">3.</span><span style="color:#A6ACCD;"> hello</span></span>
<span class="line"><span style="color:#89DDFF;">--</span><span style="color:#F78C6C;">3.1</span><span style="color:#A6ACCD;"> 环境变量</span></span>
<span class="line"><span style="color:#A6ACCD;">下载 </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//ffmpeg.org/download.html#build-windows </span></span>
<span class="line"><span style="color:#A6ACCD;">下载gyan </span><span style="color:#FFCB6B;">的https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//www.gyan.dev/ffmpeg/builds/ 的 ffmpeg.git.full.7z 就好了, 然后将解压的bin目录放到环境变量中去</span></span></code></pre></div><h2 id="_8-2-实操" tabindex="-1">8.2 实操 <a class="header-anchor" href="#_8-2-实操" aria-label="Permalink to &quot;8.2 实操&quot;">​</a></h2><h3 id="_8-2-1-查看" tabindex="-1">8.2.1 查看 <a class="header-anchor" href="#_8-2-1-查看" aria-label="Permalink to &quot;8.2.1 查看&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">查看简单指令</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4  </span><span style="color:#676E95;font-style:italic;">// 在input 中可以看到一些流 Input 中是里面的MP4之类的东西。然后stream 里面是 具体的一些流</span></span></code></pre></div><h3 id="_8-2-2-转码" tabindex="-1">8.2.2 转码 <a class="header-anchor" href="#_8-2-2-转码" aria-label="Permalink to &quot;8.2.2 转码&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 查看 h26 之后的东西 h26 | hevc</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">codecs </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep h26</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 指定转码器 根据上文的输出 (encoders: libx264 )。然后 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// -c:v 这里是转化MP4 -c:v:0 xxx第几个流 用什么格式</span></span>
<span class="line"><span style="color:#A6ACCD;">fmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v  libx265 demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv </span><span style="color:#676E95;font-style:italic;">// libx264 之类的</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v  copy demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv </span><span style="color:#676E95;font-style:italic;">// 直接拷贝</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// -c:a 这里是转化音频</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v libx265 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">a libmp3lame demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv </span><span style="color:#676E95;font-style:italic;">// 直接拷贝</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// -c:s 这里是转化字幕</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v libx265 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">a libmp3lame </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">s srt  demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv </span><span style="color:#676E95;font-style:italic;">// 直接拷贝</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv </span><span style="color:#676E95;font-style:italic;">// 默认情况 会保留第一个流.可以看到Stream mapping:  可以看stream 为video 后面的 第一个参数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4  </span><span style="color:#89DDFF;">^</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">map </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">:</span><span style="color:#FFCB6B;">v</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> 把input 的 第0个视频的第0个 video 映射 </span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">map </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">:</span><span style="color:#FFCB6B;">a</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> 把input 的 第0个视频的第0个 audio 映射 </span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">map </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">:</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> 把input 的 第0个视频的第0个 字幕 映射 </span></span>
<span class="line"><span style="color:#A6ACCD;">demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv</span></span></code></pre></div><h3 id="_8-2-3-分辨率" tabindex="-1">8.2.3 分辨率 <a class="header-anchor" href="#_8-2-3-分辨率" aria-label="Permalink to &quot;8.2.3 分辨率&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// -s 指定 大小</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// -r 指定 最大帧率</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// -b:v 1M 最大比特率</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v  copy </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">s 4096x2480 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">r </span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v 1M demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 不保持纵宽比例</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logo.png</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-vf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scale=</span><span style="color:#F78C6C;">320</span><span style="color:#C3E88D;">:240</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">output_320x240.png</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  保持纵宽比例</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logo.png</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-vf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">scale=</span><span style="color:#F78C6C;">3200</span><span style="color:#C3E88D;">:-1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">output_320x240.png</span></span></code></pre></div><h3 id="_8-2-3-时间截取" tabindex="-1">8.2.3 时间截取 <a class="header-anchor" href="#_8-2-3-时间截取" aria-label="Permalink to &quot;8.2.3 时间截取&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 从3秒开始 持续8秒钟</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4  </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v  copy  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">ss </span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">03</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">t </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">  demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 从3秒开始 到8秒钟</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4  </span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v  copy  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">ss </span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">03</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">to </span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">08</span><span style="color:#A6ACCD;">  demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mkv</span></span></code></pre></div><h3 id="_8-2-4-合成视频-和-音频" tabindex="-1">8.2.4 合成视频 和 音频 <a class="header-anchor" href="#_8-2-4-合成视频-和-音频" aria-label="Permalink to &quot;8.2.4 合成视频 和 音频&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 下面这段代码是将 demo 的 mp3 和 oppo 的MP4 进行合成</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">oppo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-map</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">:a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-map</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">:v</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">output.mp4</span></span></code></pre></div><h3 id="_8-2-5-合成多个视频-y-不经过提示直接覆盖" tabindex="-1">8.2.5 合成多个视频 | -y 不经过提示直接覆盖 <a class="header-anchor" href="#_8-2-5-合成多个视频-y-不经过提示直接覆盖" aria-label="Permalink to &quot;8.2.5 合成多个视频  | -y 不经过提示直接覆盖&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">720</span><span style="color:#C3E88D;">x480</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-vf</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">setsar=sar=1/1,setdar=dar=1920/1080</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">-c:v</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">libx264</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo_output.mp4</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">oppo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">720</span><span style="color:#C3E88D;">x480</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-vf</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">setsar=sar=1/1,setdar=dar=1920/1080</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">-c:v</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">libx264</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">oppo_output.mp4</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 大小必须一样</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">oppo_output.mp4</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo_output.mp4</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">-filter_complex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[0:0][0:1][1:0][1:1] concat=n=2:v=1:a=1 [v] [a]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[v]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[a]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-vsync</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">output.mp4</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-vsync</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">可以避免</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">重复帧</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">的报错报</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">卡住的错误</span></span></code></pre></div><h3 id="_8-2-6-截图" tabindex="-1">8.2.6 截图 <a class="header-anchor" href="#_8-2-6-截图" aria-label="Permalink to &quot;8.2.6 截图&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#截取第7秒第1帧的画面</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ss</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-vframes</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">video_image.jpg</span></span></code></pre></div><h3 id="_8-2-7-水印" tabindex="-1">8.2.7 水印 <a class="header-anchor" href="#_8-2-7-水印" aria-label="Permalink to &quot;8.2.7 水印&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 离左边20个像素，离上面80个像素 添加一个 logo.png的水印</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logo.png</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-filter_complex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">overlay=20:80</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">video_watermark.mp4</span></span></code></pre></div><h3 id="_8-2-8-输出gif" tabindex="-1">8.2.8 输出gif <a class="header-anchor" href="#_8-2-8-输出gif" aria-label="Permalink to &quot;8.2.8  输出gif&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#基本是字面意思了，从7.5s 到 8.5 秒</span></span>
<span class="line"><span style="color:#FFCB6B;">ffmpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">demo.mp4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ss</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7.5</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.5</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">640</span><span style="color:#C3E88D;">x320</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">15</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">video_gif.gif</span></span></code></pre></div><h3 id="_8-2-9-录屏-直播-基本用不了" tabindex="-1">8.2.9 录屏 | 直播（基本用不了） <a class="header-anchor" href="#_8-2-9-录屏-直播-基本用不了" aria-label="Permalink to &quot;8.2.9  录屏 | 直播（基本用不了）&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">windows</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">f gdigrab </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i desktop rec</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4</span></span>
<span class="line"><span style="color:#A6ACCD;">q：退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ubuntu</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> sudo ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">f fbdev </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">framerate </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dev</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">fb0 rec</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)直播</span></span>
<span class="line"><span style="color:#A6ACCD;">ffmpeg </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">re i rec</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4 按照网站要求编码 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">f flv </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">你的rtmp地址/你的直播码</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h3 id="_8-2-11-常用" tabindex="-1">8.2.11 常用 <a class="header-anchor" href="#_8-2-11-常用" aria-label="Permalink to &quot;8.2.11  常用&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">an   [output</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4]  </span><span style="color:#676E95;font-style:italic;">//  输出前面加上这个可以静音</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">vn   [output</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mp4]  </span><span style="color:#676E95;font-style:italic;">//  输出前面加上这个可以除掉视频</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">map </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">:</span><span style="color:#FFCB6B;">a</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 可以获取到第0个视频第三个音频</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">c copy  </span><span style="color:#676E95;font-style:italic;">// 就是格式复制而已</span></span></code></pre></div>`,28),e=[o];function t(c,r,C,y,D,A){return a(),n("div",null,e)}const m=s(p,[["render",t]]);export{F as __pageData,m as default};
